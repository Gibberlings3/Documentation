<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>IWDSpells</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="stylesheet" href="style/g3readme_cam_022916.css" type="text/css" />
<link href="style/g3icon.ico" rel="icon" type="image/bmp" />
</head>
<body>
<div id="container">
  <div class="ribbon_menu">
    <ul>
      <li><a href="#Overview">Overview</a></li>
      <li><a href="#Compatibility">Compatibility</a></li>
      <li><a href="#Bugs">Bug Reporting</a></li>
      <li><a href="#Installation">Installation</a></li>
      <li><a href="#Use">Use</a></li>
	  <li><a href="#Lang">Languages</a></li>
      <li><a href="#Contact">Contact</a></li>
      <li><a href="#Thanks">Thanks</a></li>
      <li><a href="#Credits">Credits</a></li>
      <li><a href="#History">History</a></li>
    </ul>
    <span><img src="style/logo.gif" width="305" height="83" alt="G3" /></span> </div>
  <div class="ribbon_bubble">
    <div class="ribbon_rectangle">
      <h1>IWDSpells</h1>
    </div>
    <div class="ribbon_triangle-l"></div>
    <div class="ribbon_triangle-r"></div>
    <div class="section">
      <p><strong><a href="http://www.gibberlings3.net/">A Gibberlings Three Mod</a><br />
       Authors:</strong> <a href="https://www.gibberlings3.net/profile/8-camdawg/">CamDawg</a> and <a href="https://www.gibberlings3.net/profile/1067-davidw/">DavidW</a><br />
       <strong> On the web: </strong><a href="https://www.gibberlings3.net/mods/spells/iwdification/">Home
        page</a> and <a href="https://www.gibberlings3.net/forums/forum/185-iwdification/">discussion
       forum</a></p>
      <p><strong>Version Release Candidate 1<!-- - <a href="http://www.gibberlings3.net/forums/index.php?app=downloads&amp;showcat=36">Check
        for the most recent version</a>--></strong><br />
    </div>
    <div class="ribbon_rectangle_h2"><a id="Overview" name="Overview"></a>
      <h2>Overview</h2>
    </div>
    <div class="ribbon_triangle_h2-l"></div>
    <div class="ribbon_triangle_h2-r"></div>
    <div class="section">
      <div>
        <p>IWDSpells is a tool to bring the new spells and bard songs from Icewind Dale into the Baldur's Gate series of games. While it can be used as a standalone mod, it's primarily intended as a tool for modmakers to include in their own mods; this readme assumes that you are a modmaker and are familiar with WEIDU mods. (If you are not a modder and just want the IWD spells, it's probably simpler to use the </strong><a href="https://www.gibberlings3.net/mods/spells/iwdification/">IWDification mod</a>.)</p>

		<p>	A lot of this project is based upon the work of the discontinued <a href="https://www.gibberlings3.net/forums/forum/155-icewind-dale-in-baldurs-gate-ii/"><acronym title="Icewind Dale">IWD</acronym>-in-<acronym title="Baldur's Gate II">BG2</acronym></a> conversion project, which later formed the backbone of IWDEE. </p>
        <p>Please report any bugs on the <a href="https://www.gibberlings3.net/forums/forum/185-iwdification/">forums</a> so that they can be addressed. </p>
      </div>
    </div>
    <div class="ribbon_rectangle_h2"><a id="Compatibility" name="Compatibility"></a>
      <h2>Compatibility</h2>
    </div>
    <div class="ribbon_triangle_h2-l"></div>
    <div class="ribbon_triangle_h2-r"></div>
    <div class="section">
      <div>
        <p>IWDSpells works on all <acronym title="Infinity Engine">IE</acronym> games that use the Baldur's Gate II engine, which includes the original   Baldur's Gate II (Shadows of Amn with or without  Throne of Bhaal), the   two major Baldur's Gate conversion mods (Tutu and <acronym title="Baldur's Gate Trilogy">BGT</acronym>),   and the Enhanced Editions of Baldur's Gate and Baldur's Gate II.</p>
<p><strong>For non-EE games: </strong></p>
<p>You will see references to &quot;original&quot; or &quot;vanilla&quot; BG2 to differentiate it from the Enhanced Editions. Note that this includes any installation running on the original BG2 engine, notably BGT or Tutu. </p>
        <p><a href="http://www.spellholdstudios.net/ie/tobex">TobEx</a> is   highly recommended for players using the spell packs on the original games. Without <a href="http://www.spellholdstudios.net/ie/tobex">TobEx</a>,   spell selection screens during character creation are limited to 24   spells, as are spellbook pages. Since there are more than 24 spells   available at some levels you will not be able to see all spells   available or be able to select them. Cat's Grace, a second-level arcane   spell, relies on functionality provided by <a href="http://www.spellholdstudios.net/ie/tobex">TobEx</a> and will be skipped if   it's not detected. </p>
        <p>The fourth-level divine spell Giant Insect relies on <a href="http://www.spellholdstudios.net/ie/infinityanimations">Infinity Animations</a>, as the beetles summoned by the spell do not have animations in the original <acronym title="Baldur's Gate II">BG2</acronym>,   and will be skipped without the mod being installed. Polymorph Self and druidic shapeshifting will also have an additional option, Boring Beetle, if IA is installed.      </p>
      </div>
    </div>
    <div class="ribbon_rectangle_h2"><a id="Bugs" name="Bugs"></a>
      <h2>Bug Reporting</h2>
    </div>
    <div class="ribbon_triangle_h2-l"></div>
    <div class="ribbon_triangle_h2-r"></div>
    <div class="section">
      <p>If you should encounter any bugs, please report them to the authors at the <a href="https://www.gibberlings3.net/forums/forum/185-iwdification/">IWDification</a> forum. In addition, IWDSpells is <a href="https://github.com/Gibberlings3/iwdification">available on GitHub</a>, so fixes and changes can be submitted by the community. </p>
      <h3>Known Issues</h3>
      <p>Contact Other Plane has no dialogue written, and is therefore unavailable at present.      </p>
      <h3>Known Issues (Non-EE Games)      </h3>
      <p>For the <strong>Arcane</strong> and <strong>Divine Spell Packs</strong>, not all spells could be converted to the original Baldur's Gate II engine. The Cat's Grace spell (part of the <strong>Arcane Spell Pack</strong>) requires <a href="http://www.spellholdstudios.net/ie/tobex">TobEx</a> for its unique dexterity modifications. Giant Insect (part of the <strong>Divine Spell Pack</strong>) requires the beetle animation, part of <a href="http://www.spellholdstudios.net/ie/infinityanimations">Infinity Animations</a>.  Soul Eater, Seven Eyes, Favor of Ilmater, Smashing Wave, Wall of Moonlight, and Spiritual Wrath are not available. All of the compromises made for the <strong>Arcane</strong> or <strong>Divine Spell Packs</strong> can be found in the notes on their respective spell listings (<a href="https://www.gibberlings3.net/subpages/iwdification/arcane/">arcane</a>, <a href="https://www.gibberlings3.net/subpages/iwdification/divine/">divine</a>). </p>
    </div>
    <div class="ribbon_rectangle_h2"><a id="Installation" name="Installation"></a>
      <h2>Installing this tool in your mod</h2>
    </div>
    <div class="ribbon_triangle_h2-l"></div>
    <div class="ribbon_triangle_h2-r"></div>
    <div class="section">
      <p>(Note that the tool, as packaged, is a working template mod that installs the tool. Look at the mod if you're unsure about anything).
	  <ol>
	  <li>Move the folders 'iwdspells' and 'sfo' from the template mod into the main folder of your mod. (If you want, you can rename them and/or put them in a subfolder; if you do this, you'll need to tell the tool where to find them - see below.)</li>
	  <li>If you want to install on oBG2, also copy 'bin' from the template mod into the main folder of your mod. (Again, you can rename and/or relocate it if you want to). The 'bin' folder contains two programs, oggdec and sox, that oBG2 needs to install wav files. If you already have these programs in your mod, you don't need to copy them over, but you will need to tell the tool where to find them.
	  <li>You need to have the 'iconv' function in your mod. If your mod works on both Enhanced-Edition and oBG2, you probably already have it, in the 'iconv' subfolder of the folder where you keep your translation files. If you don't have it, extract that folder from the 'lang' subdirectory of the template and move it over. (If you don't keep your tra files in a folder called 'lang', you'll have to tell the tool where to find 'iconv'.
	  <li>If your mod already has an ini file for fine-tuning installs (with a title like 'mymod.ini', living in your main mod folder), copy the contents of 'dw_iwdspells.ini' into it. Otherwise, copy dw_iwdspells.ini into your mod folder and rename it 'mymod.ini' (where 'mymod' is your mod folder). (If you really want to keep the iwdspells ini separate from your own ini, you can: just copy dw_iwdspells.ini over without renaming it. If you really want it to live in some subfolder of your mod folder, that's fine too. In either case you'll need to tell the tool where to find it.)</li>	
	  </ol>
	  </p>
    </div>
    <div class="ribbon_rectangle_h2"><a id="Use" name="Use"></a>
      <h2>Using this tool in your mod</h2>
    </div>
    <div class="ribbon_triangle_h2-l"></div>
    <div class="ribbon_triangle_h2-r"></div>
    <div class="section">
      <p>Using the tool is just a matter of INCLUDEing the file '%MOD_FOLDER%/iwdspells/iwdspells_extern.tpa' and then running the action function 'iwdspells_extern'. (Again, see the template tp2 file for examples.)</p>
	  <p>iwdspells_extern has the following arguments (all are STR_VARs). Most can be left unset if your install is standard.
	  <ul>
	  <li>'type': can be 'arcane', 'divine', 'bard', 'icon', 'collect', or 'test', depending on which function of the tool you want to use. (All are explained below.)</li>
	  <li>'custom_includes': a list of files to be INCLUDEd after the spells have been copied over. (See below).</li>
	  <li>'sfo_library_path': set this to the path (relative to your mod folder) where you put the 'sfo' folder. (For instance, if you renamed it 'sfo2e' and put it in the 'lib' subfolder of your mod folder, set sfo_library_path to 'lib/sfo2e'. You don't need to set this variable if you just moved 'sfo' into your main mod folder and left its name unchanged.
	  <li>'iwdspell_path': set this to the path (relative to your mod folder) where you put the 'iwdspells' folder. If you just moved it into your main mod folder and left its name unchanged, you don't need to set this.
	  <li>'iconv_path': set this to the path (relative to your mod folder) where you put the iconv function. This is probably 'tra_folder'/iconv, where 'tra_folder' is the name of the folder you keep your translation files in. If you keep them in 'lang', and if iconv is in that folder, you don't need to set this variable. You also don't need to bother if your mod is Enhanced-Edition-only.</li>
	  <li>'oggdec_path': set this to the path (relative to your mod folder) where you put the 'oggdec.exe' program. If you just moved it into 'bin', as in the template, you don't need to set this variable; you also don't need to bother if your mod is Enhanced-Edition-only.</li> 
	  <li>'sox_path': set this to the path (relative to your mod folder) where you put the 'sox' program. If you just moved it into 'bin', as in the template, you don't need to set this variable; you also don't need to bother if your mod is Enhanced-Edition-only.
	  </li> 
	  <li>'ini_name': if your ini file has a non-standard name (not mymod.ini), or if you want the tool to use its own ini file and not your main ini, set this to the name of the ini file you want the tool to check (full name, including .ini).</li>
	  <li>'ini_location': if your ini file (or the one you want the tool to use) is somewwhere other than your main folder, set this to its location (full path, including %MOD_FOLDER%).</li>
	  </ul>
	  </p>
	  <p>Where type is 'arcane', 'divine', 'bard', or 'icon', the tool should be idempotent: installing the same feature multiple times will be harmless. 
	  <p>The specific function of the tool are as follows.
    </div>  
    <div class="ribbon_rectangle_h3">
      <h3>Install the spells </h3>
    </div>
    <div class="ribbon_triangle_h3-l"></div>
    <div class="ribbon_triangle_h3-r"></div>
    <div class="section">
      <p>If you set 'type' to 'arcane', 'divine', or 'bard', you install the appropriate spells/songs. A few details of implementation:
	  <ul>
	  <li>All spells have scrolls created for them, using this name convention: the scroll for SPWIxyz is CDIAxyz, the scroll for SPPRxyz is CDIDxyz.</li>
	  <li>Wizard scrolls are added to stores. The main tool doesn't otherwise add scrolls to the game (but see below under 'custom').</li>
	  <li>Bard songs are made available to trueclass bards, but not to kitted bards.</li>
	  <li>On oBG2, icons for new spells are only installed if the ini variable 'install_obg2_icons' is set to 1, or if the 'icons' function of the tool has already been used. (On oBG2, icon installation is destructive and can overwrite other mods, so it needs to be possible to separate it out.</li>
	  </ul>
	  <p>For more details, see the documentation for the IWDification mod.</p>
	  <p>If 'custom' is set to a space-separated list of files (including the full path relative to your mod folder), each file is INCLUDEd after the main conversion is done. This can be used to allocate scrolls, make custom spell tweaks, add spells to enemy AI, and so on. In the template, the 'arcane' component runs two custom files from IWDification, one that adds scrolls and learned spells to the game, and one that adds a few arcane spells to enemy AI, and the 'divine' component runs one IWDification file that adds a few divine spells to enemy AI. (You are welcome to use these in your own mods.)
	  </p>
	  <p>The 'custom' files are INCLUDEd in an environment in which:
	  <ul>
	  <li>For each spell in spell.ids, a variable is set whose name is the spell ids and whose value is the spell resref: for instance, the variable WIZARD_FIREBALL is set to SPWI304.</li>
	  <li>For each spell in spell.ids for which a spell scroll exists, a variable is set giving that scroll resref, in the format WIZARD_FIREBALL_SCROLL=scrl1g.</li>
	  <li>All the standard crossplatform variables for BG1 modding (e.g. SouthBeregostRoad_Cave_BCS) are set to the appropriate values.</li>
	  <li>The full SFO function library is loaded: mostly explaining that is (way) beyond the scope of this documentation, but one useful trick is to check the ini file with this syntax: LAF check_ini STR_VAR section=[whatever] ini=[whatever] RET value END.</li>
	  </ul>Each custom file is included within a WITH_SCOPE command, so variables set in one custom file will be forgotten in the next.</p>
	  </div>
    <div class="ribbon_rectangle_h3">
      <h3>Install the icons (oBG2 only)</h3>
    </div>
    <div class="ribbon_triangle_h3-l"></div>
    <div class="ribbon_triangle_h3-r"></div>
    <div class="section">
<p>If you set 'type' to 'icon', the tool destructively installs the new spell icons for IWD spells. (This also happens automatically when you install the spells if the appropriate ini variable is set; see above.) It doesn't matter whether you install the icons before or after installing the spells themselves; the result is the same either way.
</p>
<p>This component is skipped on Enhanced-Edition installs (you get a line of text telling you it's been skipped, but no WARNING).</p>
    </div>
   <div class="ribbon_rectangle_h3">
      <h3>Collect the spell resources</h3>
    </div>
    <div class="ribbon_triangle_h3-l"></div>
    <div class="ribbon_triangle_h3-r"></div>
    <div class="section">
	<p>If you set 'type' to 'collect' and run the mod on IWD:EE, it will run a bunch of bugfixes on IWD:EE and then collect all the various spell resources and dump them into a folder called 'copyover' in your main IWDEE directory. If you then replace 'iwdspells/copyover' with that folder in your mod, you'll have updated the spell resources. (You mostly shouldn't have to do this - the template is provided with spell resources pre-installed.)</p>
	<p>Don't ever put this in a distributed mod!</p>
	</div>
	
    <div class="ribbon_rectangle_h2"><a id="Lang" name="Lang"></a>
      <h2>Languages</h2>
    </div>
    <div class="ribbon_triangle_h2-l"></div>
    <div class="ribbon_triangle_h2-r"></div>
    <div class="section">
	<p>
	IWDSpells pulls its text strings directly from IWDEE, and so for the most part it's available in every language that IWDEE is available in - as of 2.6, that's Czech, German, English, Spanish, French, Italian, Korean, Polish, Portugese, Russian, and two versions of Chinese.
	</p>
	<p>However, a (very) small number of strings need to be included manually. These are in the 'iwdspells/lang' directory, and at present are only available in English. So if the mod is installed in any language other than English, for now a couple of spell descriptions will be inaccurate, a couple more will be in English, and a few summoned creatures will have English names.
	</p>
	<p>For technical reasons (at least if you are installing on oBG2), the names for languages must be exactly as presented in the template (and repeated in iwdspells/data/obg2_lang_map.txt). Renaming 'german' to 'Deutsch', for instance, will cause the converter to use the wrong strings.</p>
	
	
	</div>
	
    <div class="ribbon_rectangle_h2"><a id="Contact" name="Contact"></a>
      <h2>Contact Information</h2>
    </div>
    <div class="ribbon_triangle_h2-l"></div>
    <div class="ribbon_triangle_h2-r"></div>
    <div class="section">
      <p>IWDSpells is the hard work of CamDawg and DavidW. For issues, suggestions and
        general feedback, the <a href="https://www.gibberlings3.net/forum/185-iwdification/">IWDification
        forums</a> are the best resource. Visit the <a href="https://www.gibberlings3.net/forums">Gibberlings
        Three Forums</a> for information on this and any other Gibberlings Three
        mods on which we may be working.</p>
    </div>
    <div class="ribbon_rectangle_h2"><a id="Thanks" name="Thanks"></a>
      <h2>Thanks and Acknowledgments</h2>
    </div>
    <div class="ribbon_triangle_h2-l"></div>
    <div class="ribbon_triangle_h2-r"></div>
    <div class="section">
<p>[probably copy IWDification with minor tweaks?]
    </div>
    <div class="ribbon_rectangle_h2"><a id="Credits" name="Credits"></a>
      <h2>Credits and Copyright Information</h2>
    </div>
    <div class="ribbon_triangle_h2-l"></div>
    <div class="ribbon_triangle_h2-r"></div>
    <div class="section">
      <p> The modding community for the Infinity Engine has been going strong for
        more than 10 years now, and is the culmination of thousands of unpaid modding
        hours by fellow fans of the game. Modders produce their best work and players
        get the best, well-supported mods when we all work together. </p>
      <p> There are two big ways to upset this harmony. One is to claim someone else's
        work as your own. The second is to host and redistribute a mod without permission
        from the author(s). </p>
      <p> Be kind to your fellow players and modders. Don't do either. </p>
    </div>
    <div class="ribbon_rectangle_h2"><a id="History" name="History"></a>
      <h2>Version History</h2>
    </div>
    <div class="ribbon_triangle_h2-l"></div>
    <div class="ribbon_triangle_h2-r"></div>
    <div class="section">
      <div>
       </div>
    </div>
  </div>
</div>
</body>
</html>
